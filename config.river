declare "db" {
    argument "names" {}
    prometheus.exporter.postgres "db" {
        data_source_names = argument.names.value
    }


      discovery.relabel "postgres_relabel" {
        targets = prometheus.exporter.postgres.db.targets
        rule {
          target_label  = "job"
          replacement = "ecommerce/productcatalog_postgres"
        }
      }

    export "targets" {
        value = discovery.relabel.postgres_relabel.output
    }
}
